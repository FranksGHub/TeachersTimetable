Version 1.1.0
Step 1
We already have the 6 rows with 5 blocks each. Now, when we click on a block, a settings dialog will open and we can edit the color, the lesson name, the class name and the school name. In the next step, if we click on a block, another page should be open (or a popup dialog) with a settings button on the top right corner, which will open the current settings dialog with the color, lesson name and so on. Inside the new page, we need two lists with text line items and text line subitems wich can be filled by the user (default is an empty list), items can be collapsed and expand again. There must be a button to add an item and a button to add an subitem to an selected item. The list on the right side is loaded from and saved to a jason file, the filename is the lesson name of the block combines with ".json". The left side list is loaded from and saved to a json file with filename combined by the lesson name and the school name of the block added with ".json". The path of all the files can be set inside the main hamburger menu and should be stored inside the prefs. The text line items in the left side list needs a status button and a status text on the left side of each text line with the states "Planned", "Working" and "Finished". The belonging status texts are "P", "W" and "F". Default is "Planned" and each click on the status button will switch the status text to the next status and back to "Planned". One more global button is needed to copy a text line item selected in the right side list into the left side list, above the left lists selected position or at the end of the list if no item is selected on the left side. Also there must be a button to copy a sub item from the right side list into a selected item on the left side list. Also the items and subitems on the left side list may be moved one row to the top, or one row to the button of the list. The subitems stay inside the item, if the item is moved. The sub items may be moved inside the parent item only.

Step 2
There is an exception, if i add subitems to an item: "UnsupportedError (Unsupported operation: Cannot add to an unmodifiable list)" in line 136 of the file lesson_detail_page.dart.
The text of each item and subitem must be editable by the user, with another click on a selected item / sub item or a double click or a separate button...

Step 3
The status button and text of the left list must be located at the subitem. Insert a space between the status text and the sub item text. Let the button color be green if the status is finished and otherwise yellow. The default after loading the list on the left side should be collapsed if all subitems of a item are on green and otherwise expanded. On the right side list, after loading, all items must be collapsed. Please move the copy buttons to the right list and make all the button and page strings translatable. Thank you!

Step 4
Please add a delete button to each line of the left and right list items. Good position is on the left side of the move up and down buttons. The right list is missing the up and down buttons at the item lines, only the sub item have this buttons. The current selected line is not realy visible in all cases, can we paint the selected line with a light gray background?

Web Version?
In the web version, I can't execute "setDataPath," and the edit_block_dialog doesn't close when I save. The settings are saved somewhere, but only for this browser. In another browser, the settings are gone. Where can the user settings be saved in the web version? Is that even possible in the web version? How does it work in the Android version?
Answer: "Since localStorage is browser-specific, consider:  
Cloud Sync (best solution):
            Add Firebase Firestore or similar backend
            Users can sync data across browsers and devices
Export/Import (current approach):
            Your app already has this! The user can export and import data
Use isar or hive package (local database):
            Better than SharedPreferences for web
            Still browser-specific, but more reliable

Android version?
On Android I choose a sub path from Documents for the data path, but automatic load / save for the both lists in lesson_detail_page.dart is not possible. Manuell export / import of the user settings data is possible.

~~~~~~~~~~~~~~~~~~~~~~~~~~
https://developer.android.com/training/data-storage/manage-all-files?hl=de
Zugriff auf alle Dateien anfordern
Eine App kann den Zugriff auf alle Dateien vom Nutzer anfordern, indem sie Folgendes tut:

Deklarieren Sie die Berechtigung MANAGE_EXTERNAL_STORAGE im Manifest.
Verwende die Intent-Aktion ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION, um Nutzer zu einer Seite mit Systemeinstellungen weiterzuleiten, auf der sie die folgende Option für deine App aktivieren können: Zugriff zum Verwalten aller Dateien zulassen.
Rufen Sie Environment.isExternalStorageManager() auf, um festzustellen, ob Ihrer App die Berechtigung MANAGE_EXTERNAL_STORAGE erteilt wurde.

Die Berechtigung MANAGE_EXTERNAL_STORAGE gewährt Folgendes:

Lese- und Schreibzugriff auf alle Dateien im gemeinsamen Speicher.

Hinweis :Das Verzeichnis /sdcard/Android/media⁠ ist Teil des gemeinsam genutzten Speichers.
Zugriff auf die Inhalte der Tabelle MediaStore.Files.

Zugriff auf das Stammverzeichnis des USB-OTG-Laufwerks und der SD-Karte.

Schreibzugriff auf alle internen Speicherverzeichnisse mit Ausnahme von /Android/data/, /sdcard/Android und den meisten Unterverzeichnissen von /sdcard/Android. Dieser Schreibzugriff umfasst den Zugriff über den direkten Dateipfad.

Apps, denen diese Berechtigung erteilt wurde, können weiterhin nicht auf die app-spezifischen Verzeichnisse anderer Apps zugreifen, da diese Verzeichnisse als Unterverzeichnisse von Android/data/ auf einem Speichermedium angezeigt werden.

Wenn eine App die Berechtigung MANAGE_EXTERNAL_STORAGE hat, kann sie über die MediaStore API oder direkte Dateipfade auf diese zusätzlichen Dateien und Verzeichnisse zugreifen. Wenn Sie jedoch das Storage Access Framework verwenden, können Sie nur dann auf eine Datei oder ein Verzeichnis zugreifen, wenn Sie dies ohne die Berechtigung MANAGE_EXTERNAL_STORAGE tun können.

~~~~~~~~~~~~~~~~~~~~~~~~~~~
https://developer.android.com/training/data-storage/app-specific?hl=de#internal-access-files
Auf app-spezifische Dateien zugreifen



In vielen Fällen erstellt Ihre App Dateien, auf die andere Apps nicht zugreifen müssen oder sollten. Das System bietet die folgenden Speicherorte zum Speichern solcher app-spezifischen Dateien:

Verzeichnisse für internen Speicher:Diese Verzeichnisse umfassen sowohl einen dedizierten Speicherort für persistente Dateien als auch einen weiteren Speicherort für Cache-Daten. Das System verhindert, dass andere Apps auf diese Speicherorte zugreifen. Unter Android 10 (API‑Level 29) und höher werden diese Speicherorte verschlüsselt. Aufgrund dieser Eigenschaften eignen sich diese Speicherorte gut zum Speichern vertraulicher Daten, auf die nur Ihre App selbst zugreifen kann.

Externe Speicherverzeichnisse:Diese Verzeichnisse enthalten sowohl einen dedizierten Speicherort für persistente Dateien als auch einen weiteren Speicherort für Cache-Daten. Obwohl eine andere App mit den entsprechenden Berechtigungen auf diese Verzeichnisse zugreifen kann, sind die darin gespeicherten Dateien nur für die Verwendung durch Ihre App vorgesehen. Wenn Sie Dateien erstellen möchten, auf die andere Apps zugreifen können, sollte Ihre App diese Dateien stattdessen im gemeinsamen Speicher des externen Speichers speichern.

Wenn der Nutzer Ihre App deinstalliert, werden die im App-spezifischen Speicher gespeicherten Dateien entfernt. Aus diesem Grund sollten Sie diesen Speicher nicht verwenden, um Inhalte zu speichern, die der Nutzer unabhängig von Ihrer App behalten möchte. Wenn Ihre App beispielsweise Nutzern ermöglicht, Fotos aufzunehmen, erwarten sie, dass sie auch nach der Deinstallation Ihrer App auf diese Fotos zugreifen können. Daher sollten Sie stattdessen den freigegebenen Speicher verwenden, um diese Arten von Dateien in der entsprechenden Mediensammlung zu speichern.

In den folgenden Abschnitten wird beschrieben, wie Sie Dateien in appspezifischen Verzeichnissen speichern und darauf zugreifen.
Zugriff über den internen Speicher
Für jede App stellt das System Verzeichnisse im internen Speicher bereit, in denen eine App ihre Dateien organisieren kann. Ein Verzeichnis ist für die persistenten Dateien Ihrer App vorgesehen, das andere enthält die im Cache gespeicherten Dateien Ihrer App. Ihre App benötigt keine Systemberechtigungen, um Dateien in diesen Verzeichnissen zu lesen und zu schreiben.

Andere Apps können nicht auf Dateien zugreifen, die im internen Speicher abgelegt sind. Daher ist der interne Speicher ein guter Ort für App-Daten, auf die andere Apps nicht zugreifen sollten.

Diese Verzeichnisse sind jedoch in der Regel klein. Bevor Ihre App app-spezifische Dateien in den internen Speicher schreibt, sollte sie den freien Speicherplatz auf dem Gerät abfragen.

Auf persistente Dateien zugreifen
Die normalen, persistenten Dateien Ihrer App befinden sich in einem Verzeichnis, auf das Sie mit dem Attribut filesDir eines Kontextobjekts zugreifen können. Das Framework bietet mehrere Methoden, mit denen Sie auf Dateien in diesem Verzeichnis zugreifen und sie dort speichern können.

Auf Dateien zugreifen und Dateien speichern
Sie können die File API verwenden, um auf Dateien zuzugreifen und sie zu speichern.

Um die Leistung Ihrer App zu erhalten, sollten Sie dieselbe Datei nicht mehrmals öffnen und schließen.

Das folgende Code-Snippet zeigt, wie die File API verwendet wird:

Kotlin
Java

val file = File(context.filesDir, filename)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
https://stackoverflow.com/questions/78692611/file-permission-for-android-14-and-higher

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Step 5
Let's forget about freely choosing a directory for file storage. Instead, let's use the shared directory for Android apps via "getApplicationDocumentsDirectory". On Windows, files can also be automatically stored and read in the AppData directory with the program name.

Step 6
My only problem now is that I can no longer copy files between Android and Windows. I need two menu items in the hamburger menu: "Export all files" and "Import all files." Ideally, a zip file should be able to be saved and read there. The zip file should contain all files in the dataPath directory, and when imported, the zip should be extracted back into that directory. Existing files will be overwritten in the process.

Step 7
Just one more small thing: the line spacing in the two lists of `lesson_details_page.dart` is too large; it could be halved. This applies to both the items and the sub-items. A separator line appears between the items; this could also be removed.


Step 8 printing
Ich möchte aus meiner flutter / dart app ein pdf zum Drucker schicken. Die Seite besteht aus einer Überschrift, einer Tabelle aus 5 Spalten mit 6 Zeilen die jeweils einen farbigen Block mit 3 Zeilen Text enthalten. Über den Spalten gibt es jeweils einen zentrierten Text und links von den Zeilen gibt es ebenfalls einen Text. Die Infos für die Überschrift kommt aus dem "title" parameter, die Texte oberhalb der Spalten aus dem "days" parameter, die Texte vor den Zeilen aus dem "times" parameter und die Block Infos aus dem "LessonBlock" parameter. Lesson Block hat variablen für Color und 3 Strings für die Textzeilen. Anfangen würde ich mit: "  Future<bool> PrintTimetable(BuildContext context, String title, List<String> days, List<String> times, List<List<LessonBlock>> timetable) async {    final pdf = pw.Document();    pdf.addPage(" 